const utils = require("../utils.js");

// const input = ["...#......", ".......#..", "#.........", "..........", "......#...", ".#........", ".........#", "..........", ".......#..", "#...#....."];
const input = ["...........................#.............#..........#.........#..................#.......#.............................................#....", "..............#...........................................................................................#...............#.................", ".....................#......................................................................................................................", "...................................#................................#................................................#....................#.", ".................#.......................................................#..........#..................#.............................#......", "...............................................................................................#.................#..........................", "......................................................#........................#........................................#...................", "........#.....................................................#...........................#.................#...............................", ".........................................#.....#...............................................................................#............", "...........................#.........................................................#...................................................#..", ".....#................................................................#............................................................#........", ".............#..........................................#.......................................#.................#.........#...............", "............................................#...............................................................................................", ".#...............#.....................#....................................#.............................#................................#", "............................#....................#..........................................................................................", "...................................................................................................#..........#.............................", ".......#............#.........................................#........#.........................................................#..........", "..............#.................................................................#..........#............................#...................", "................................#........................................................................................................#..", "...............................................#.....................................................#...........#..........................", "#...............................................................#...........................................................................", "............#......#...................................#....................................................#.............#.........#.......", ".......................................................................................#....................................................", "....................................#........................#......#...........................#...........................................", ".........#.....#.............#............#.....................................#.....................................#.....................", "..........................................................................................................#.....#...............#..........#", "........................................................#...................................................................................", "..........................#.................................................................................................................", "....#..................................................................#..................................................#.................", ".....................#..........................................#...........................#.........#.....................................", "...........#.........................#.......................................#......#.................................................#.....", "#...............................................................................................#..................#............#...........", "............................#.............#.........#.......................................................................................", "........#...........................................................#.......................................................................", ".........................................................................#..........................#.......................................", "..#..........#............................................#.....#.....................#...............................#.....................", ".....................................#...............................................................................................#......", "....................#......................#....................................................................................#...........", ".....#......................................................................................................................................", "................................#....................#............................#.........................................................", "........................#......................................................................#.............................#..............", ".......................................................................#....................................................................", "..............#.................................#......................................................#.......#..................#.......#.", "............................................................#............................#..................................................", "..........................................................................................................................#.................", "..#.................#.........#............................................#.......#........................................................", ".......#.............................................#........................................#.......................#.....................", "...............................................................#.................................................................#..........", "...........................#...............#.......................................................#.....................................#..", ".................................#..............#...............................................................#...........................", "...............#........................................................................#...................................................", ".........................................................#......................................#..........#................................", "..#......................................#................................#.................................................................", "...............................#............................................................#..............................................#", "..........#........#............................................#...............................................................#...........", "................................................................................#..................#...........#..........#.................", "..................................#........#................................................................................................", "............................................................................................................................................", ".....................#............................................#............................#.......#.....................#..............", "............................#........................#.....................#..........#..........................#.....................#....", ".........................................................................................................................#..................", ".#.........#...........................#.......................#...................................#........................................", "................#........#.....................................................................................................#..........#.", "...........................................................................................#.................#..............................", "...............................#......................................#............................................#........................", ".........................................#.......#......................................................#...................................", "..........#..................................................#.................#............................................................", "#.......................#..............................................................#...........................................#.......#", ".................................#......................#........................................................#........#.................", "............................................................................................................................................", "...............................................#...............................................#............................................", "................#.....................#.......................................#.............................................................", "......................................................#...............#.....................................................................", "...................................................................................#.............................................#..........", "..................................................................#........#....................................#...........................", ".#.......................................................#.................................#............#...................................", "............................................................................................................................................", "........#.......................#................................................#.........................................#................", "..................#......#......................................................................#...........................................", "......................................#...............#..........#.....................................................................#....", "...#....................................................................................#...................................................", "...............#..............................#.............................#...............................................................", "...................................#..............................................................#.....#........................#.........#", ".......#............#...................................................................................................#...................", "...........................#.................................................................#................#.............................", ".....................................................#...............................................#......................................", "...........#..............................................#.................................................................................", "..............................................#.................#...............#.........#.................................................", "................#.......#...........#.................................#...................................#.................................", ".....................................................................................#...........#...................#......................", "........................................................#......................................................................#.......#....", ".....#......................#...............................................................................................................", ".............#........#..........................#..........................................................#.............#................#", "............................................................................................................................................", "........#............................#............................................#..........#..............................................", "............................................#...................................................................#...........................", "............................................................................................................................................", "..#..............#......#.........................................#...............................#.........................................", "....................................................#......................#.......................................................#......#.", "...................................#........................#................................................................#..............", ".....................................................................#...........#..........................................................", "...............#.............................#...........................................................#..................................", "..........#..............................................................................#.....#.................#..........................", ".....................................................................................................................................#......", ".#................................#.........................................................................#...............................", "........................#.........................................#......#.........#................#.......................................", ".................#........................................#..................................................................#..............", "........................................#...................................................................................................", "....#.....#........................................#............................................#...........................................", "............................................................................................................................................", "..............................................................................#.....................................#................#......", ".....................#................................................................#.........................................#...........", ".............................#.........#........#.........#.............#...........................#.......................................", "................................................................#.........................#..................#............#.............#...", "........#.......................................................................#...........................................................", "........................#..................#............................................................#...................................", ".....................................#.................................................#.........#................#.........................", "...................................................#.....................#....................................................#............#", "............................................................................................................................................", "................#..............................................#.................#............................#.............................", "....#........................#..........................#............#......................................................................", "....................................#........................................................#..............................................", ".......................#..........................................................................#.....#...........#............#..........", "........#..................................#................#.............#...........................................................#.....", "................................................#.......................................................................#..................#", "..................#.................................................................#.......................................................", "............#........................#...........................................................................#.............#............", "...#........................................................................................................................................", "..........................................#.................................#................#..............................................", ".......................#............................#.............#...................................................#.............#.......", ".................................#....................................................#........................#............................", ".................................................................................#........................................................#.", "..........................................................#.............................................#...................................", "...#............#...........................................................................................................................", "..............................................#...................................................#.........................................", ".........................................................................#.....#.......#.........................................#..........", "............#.........#......................................................................#........#.....................................", "...........................#........................................#........................................#.......................#......", ".....#.................................#..............#........#.....................................................#......................", "...............................#............................................#........#....................................#................."];

let empty_rows = [];
input.forEach((row, i) => {
    if (!row.match(/#/g)) empty_rows.push(i);
});
let empty_cols = [];
utils.range(0, input[0].length).map((_, colIndex) => input.map(row => row[colIndex])).forEach((col, j) => {
    if (!col.includes("#")) empty_cols.push(j);
});

let galaxy_locations = [];
input.forEach((row, i) => row.split("").forEach((val, j) => {
    if (val == "#") galaxy_locations.push([i, j]);
}));

function dist_1d(start, end, gaps, gap_size){
    let int_vals = end > start ? utils.range(start, end) : utils.range(end, start);
    return utils.sum_list(int_vals.map(c => gaps.includes(c) ? gap_size : 1));
}

let part1 = 0;
let part2 = 0;
galaxy_locations.forEach((g1, i) => galaxy_locations.forEach((g2, j) => {
    if (j>i){
        part1 += dist_1d(g1[0], g2[0], empty_rows, 2) + dist_1d(g1[1], g2[1], empty_cols, 2);
        part2 += dist_1d(g1[0], g2[0], empty_rows, 1000000) + dist_1d(g1[1], g2[1], empty_cols, 1000000);
    }
}));
console.log("Part 1:", part1);
console.log("Part 2:", part2);